---
layout: default
title: Support for atomic operations and synchronization
scrollspytarget:
---

<div class="optimsoc-section-header">
  
  <h1>API Documentation</h1>
  
</div>

  

<hr/>

<div class="col-md-3">
  <div class="optimsoc-doc-mainnav affix" data-spy="affix" data-offset-top="50">
    <div style="padding-bottom:10px" class="nav">
      version master (<a href="/docs/index.html#document-archive">other versions</a>)

      
      
        <ul class="nav current">
<li class="toctree-l1"><a class="reference internal" href="group__utility.html">Utility functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="group__system.html">OpTiMSoC system functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="group__tracing.html">OpTiMSoC tracing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="group__libbaremetal.html">Baremetal library</a><ul class="nav current">
<li class="toctree-l2"><a class="reference internal" href="group__userio.html">User I/O</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Support for atomic operations and synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="group__dma.html">Direct Memory Access support</a></li>
<li class="toctree-l2"><a class="reference internal" href="group__mp.html">Message passing support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="group__libruntime.html">Runtime library</a></li>
</ul>

      
    </div>
  </div>
</div>

<div class="col-md-9 optimsoc-doc-body">

 <div class="section" id="support-for-atomic-operations-and-synchronization">
<h1>Support for atomic operations and synchronization<a class="headerlink" href="#support-for-atomic-operations-and-synchronization" title="Permalink to this headline">¶</a></h1>
<dl class="group">
<dt>
<span class="target" id="apigroup__sync"></span><em>group</em> <code class="descname">sync</code></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Typedefs</p>
<dl class="typedef">
<dt id="c.optimsoc_mutex_t">
<span class="target" id="apigroup__sync_1ga409c145f2d379f8f27497e57cff28917"></span><em class="property">typedef </em>uint32_t <code class="descname">optimsoc_mutex_t</code><a class="headerlink" href="#c.optimsoc_mutex_t" title="Permalink to this definition">¶</a></dt>
<dd><p>The mutex data type</p>
<p>The mutex data type which is actually hidden on purpose. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Functions</p>
<dl class="function">
<dt id="c.optimsoc_critical_begin">
<span class="target" id="apigroup__sync_1ga6555a2ff22f1dbda3ec4043bc0e90a23"></span>uint32_t <code class="descname">optimsoc_critical_begin</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_critical_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a convenience function that disables interrupts</p>
<p>The external interrupts and timer interrupts are disabled. optimsoc_critical_end can be used to enable those interrupts again. When calling the latter function the status of the external interrupts and the tick timer before entering this function needs to be restored. Therefore this function returns this value.</p>
<p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">uint32_t</span> <span class="n">restore</span> <span class="o">=</span> <span class="n">optimsoc_critical_begin</span><span class="p">();</span>
<span class="o">//</span> <span class="n">Critical</span> <span class="n">section</span> <span class="n">code</span>
<span class="n">optimsoc_critical_end</span><span class="p">(</span><span class="n">restore</span><span class="p">);</span>
</pre></div>
</div>
</p>
<p><dl class="docutils">
<dt><strong>Note</strong></dt>
<dd>This only disables the interrupts but does neither manipulate the interrupt mask vector (what you would not expect) and also does not actually stop the timer (what you might expect)</dd>
<dt><strong>Return</strong></dt>
<dd>The current status of enabled interrupts and tick timer </dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_critical_end">
<span class="target" id="apigroup__sync_1gaef42a9a3e280556413d019e047f8e449"></span>void <code class="descname">optimsoc_critical_end</code><span class="sig-paren">(</span>uint32_t<em>&nbsp;restore</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_critical_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Leave critical section</p>
<p>End a critical section and restore interrupt enables. Read the documentation of optimsoc_critical_begin for more details.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">restore</span></code>: Restore vector of interrupt and tick timer enable </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_mutex_init">
<span class="target" id="apigroup__sync_1ga4a6bc58e536b2ca100f356dd0fa05bff"></span>void <code class="descname">optimsoc_mutex_init</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_mutex_t" title="optimsoc_mutex_t">optimsoc_mutex_t</a>  *<em>&nbsp;mutex</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_mutex_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize mutex</p>
<p>Initializes a mutex so that you can lock and unlock it later.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">mutex</span></code>: Mutex to initialize </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_mutex_lock">
<span class="target" id="apigroup__sync_1ga21a2473df9c98cb68b8d4639be7f3920"></span>void <code class="descname">optimsoc_mutex_lock</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_mutex_t" title="optimsoc_mutex_t">optimsoc_mutex_t</a>  *<em>&nbsp;mutex</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_mutex_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Lock mutex</p>
<p>Lock a mutex</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">mutex</span></code>: Mutex to lock </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_mutex_unlock">
<span class="target" id="apigroup__sync_1ga0aae20377f1501c5d454feeed997b2da"></span>void <code class="descname">optimsoc_mutex_unlock</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_mutex_t" title="optimsoc_mutex_t">optimsoc_mutex_t</a>  *<em>&nbsp;mutex</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_mutex_unlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Unlock mutex</p>
<p>Unlock a mutex</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">mutex</span></code>: Mutex to unlock </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</div>


</div>