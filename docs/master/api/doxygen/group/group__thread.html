---
layout: default
title: Thread Management
scrollspytarget:
---

<div class="optimsoc-section-header">
  
  <h1>API Documentation</h1>
  
</div>

  

<hr/>

<div class="col-md-3">
  <div class="optimsoc-doc-mainnav affix" data-spy="affix" data-offset-top="50">
    <div style="padding-bottom:10px" class="nav">
      version master (<a href="/docs/index.html#document-archive">other versions</a>)

      
      
        <ul class="nav current">
<li class="toctree-l1"><a class="reference internal" href="group__utility.html">Utility functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="group__system.html">OpTiMSoC system functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="group__tracing.html">OpTiMSoC tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="group__libbaremetal.html">Baremetal library</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="group__libruntime.html">Runtime library</a><ul class="nav current">
<li class="toctree-l2"><a class="reference internal" href="group__initconfig.html">Initialization and Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="group__paging.html">Page Handling</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Thread Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="group__syscall.html">Syscall Handling</a></li>
</ul>
</li>
</ul>

      
    </div>
  </div>
</div>

<div class="col-md-9 optimsoc-doc-body">

 <div class="section" id="thread-management">
<h1>Thread Management<a class="headerlink" href="#thread-management" title="Permalink to this headline">¶</a></h1>
<dl class="group">
<dt>
<span class="target" id="apigroup__thread"></span><em>group</em> <code class="descname">thread</code></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Defines</p>
<dl class="define">
<dt id="c.OPTIMSOC_THREAD_FLAG_IDLE_THREAD">
<span class="target" id="apigroup__thread_1gabf5369239eff6e98bbe6814c1e41e2ac"></span><code class="descname">OPTIMSOC_THREAD_FLAG_IDLE_THREAD</code> 0x80000000<a class="headerlink" href="#c.OPTIMSOC_THREAD_FLAG_IDLE_THREAD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.OPTIMSOC_THREAD_FLAG_PIN">
<span class="target" id="apigroup__thread_1gac4ffdd7e7a0c79011cd4770d165f95bd"></span><code class="descname">OPTIMSOC_THREAD_FLAG_PIN</code> 0x00000100<a class="headerlink" href="#c.OPTIMSOC_THREAD_FLAG_PIN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.OPTIMSOC_THREAD_FLAG_CORE_MASK">
<span class="target" id="apigroup__thread_1gaa9fd0195df5102bd175a1587e33f2034"></span><code class="descname">OPTIMSOC_THREAD_FLAG_CORE_MASK</code> 0x000000FF<a class="headerlink" href="#c.OPTIMSOC_THREAD_FLAG_CORE_MASK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.OPTIMSOC_THREAD_FLAG_FORCEID">
<span class="target" id="apigroup__thread_1ga8c548f4000720a4e65ef5a78ee4cb1e6"></span><code class="descname">OPTIMSOC_THREAD_FLAG_FORCEID</code> 0x40000000<a class="headerlink" href="#c.OPTIMSOC_THREAD_FLAG_FORCEID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.OPTIMSOC_THREAD_FLAG_KERNEL">
<span class="target" id="apigroup__thread_1gadf211d6b3abb152384686d464280895d"></span><code class="descname">OPTIMSOC_THREAD_FLAG_KERNEL</code> 0x20000000<a class="headerlink" href="#c.OPTIMSOC_THREAD_FLAG_KERNEL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.OPTIMSOC_THREAD_FLAG_CREATE_SUSPENDED">
<span class="target" id="apigroup__thread_1ga293f2652ebda980dbe016b24abebc238"></span><code class="descname">OPTIMSOC_THREAD_FLAG_CREATE_SUSPENDED</code> 0x10000000<a class="headerlink" href="#c.OPTIMSOC_THREAD_FLAG_CREATE_SUSPENDED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Typedefs</p>
<dl class="typedef">
<dt id="c.optimsoc_thread_t">
<span class="target" id="apigroup__thread_1gac955b87b90004feab5adee013c589247"></span><em class="property">typedef </em>struct optimsoc_thread* <code class="descname">optimsoc_thread_t</code><a class="headerlink" href="#c.optimsoc_thread_t" title="Permalink to this definition">¶</a></dt>
<dd><p>Thread identifier.</p>
<p>The internals are not exposed. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Functions</p>
<dl class="function">
<dt id="c.optimsoc_thread_attr_init">
<span class="target" id="apigroup__thread_1ga4881d862010172c19bc632a77ca67e82"></span>void <code class="descname">optimsoc_thread_attr_init</code><span class="sig-paren">(</span>struct  optimsoc_thread_attr  *<em>&nbsp;attr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_attr_init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_create">
<span class="target" id="apigroup__thread_1gada00b3e18e2ef512639d60baae8ddb58"></span>int <code class="descname">optimsoc_thread_create</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a>  *<em>&nbsp;thread</em>, void(<em>*start</em>)(void *), struct  optimsoc_thread_attr  *<em>&nbsp;attr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new thread.</p>
<p>The function allocates a thread data structure in the runtime system and stores the pointer to it at the given address. The function specified by start is called and the argument arg given to it. The function is automatically added to the ready queue. </p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_current">
<span class="target" id="apigroup__thread_1ga63f66ae5f03a2928155614a178da491e"></span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a> <code class="descname">optimsoc_thread_current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify the thread currently running. </p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_yield">
<span class="target" id="apigroup__thread_1ga41decbdefc92099daac9f4af5697b9f7"></span>void <code class="descname">optimsoc_thread_yield</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;thread</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_yield" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield thread.</p>
<p>The specified thread is put at the end of the schedule. If the thread is the current thread (what makes most sense), the thread yields its remaining quantum and is scheduled to be executed later again (e.g., when waiting for I/O). </p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_suspend">
<span class="target" id="apigroup__thread_1ga1cc4ecbb6c2b4e124307eb086177f063"></span>void <code class="descname">optimsoc_thread_suspend</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;thread</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_suspend" title="Permalink to this definition">¶</a></dt>
<dd><p>Suspend thread.</p>
<p>The specified thread is suspended until it gets reactivated. </p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_exit">
<span class="target" id="apigroup__thread_1ga2707c59a29b9d37574fd1062a6da2697"></span>void <code class="descname">optimsoc_thread_exit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Exit current thread&#8217;s execution. </p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_resume">
<span class="target" id="apigroup__thread_1gabc6740c704eb8178540358e56b75c133"></span>void <code class="descname">optimsoc_thread_resume</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;thread</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_resume" title="Permalink to this definition">¶</a></dt>
<dd><p>Resume a suspended thread. </p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_add">
<span class="target" id="apigroup__thread_1ga43cc5543de37bfb473298ffe4d66dc23"></span>void <code class="descname">optimsoc_thread_add</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;thread</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a thread in the system. </p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_remove">
<span class="target" id="apigroup__thread_1gab1004c51fecc98e020164cd9848f85f8"></span>void <code class="descname">optimsoc_thread_remove</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;thread</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a thread from the system. </p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_dma_copy">
<span class="target" id="apigroup__thread_1ga68bd2cee8d93f0bbe8660a6c6d5cd0ec"></span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a> <code class="descname">optimsoc_thread_dma_copy</code><span class="sig-paren">(</span>uint32_t<em>&nbsp;remote_tile</em>, void *<em>&nbsp;remote_addr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_dma_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a remote thread with DMA </p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_join">
<span class="target" id="apigroup__thread_1ga2317cbb28269d13fa1aecbb9fbd9a7c1"></span>int <code class="descname">optimsoc_thread_join</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;thread</em>, <a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;waitforthread</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_join" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for a thread until it exits.</p>
<p>If the thread is still running, the function blocks and waits for the finish of the thread. If it is already finished, the function returns immediately. </p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_set_extra_data">
<span class="target" id="apigroup__thread_1gaa96f991d74d08685473fc9bd088a86d4"></span>void <code class="descname">optimsoc_thread_set_extra_data</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;thread</em>, void *<em>&nbsp;extra_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_set_extra_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Extra data associated with a thread</p>
<p>The user or runtime system can set extra data with the thread.This can be a pointer to a process structure or similar.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">thread</span></code>: Thread to assign the data pointer to </li>
<li><code class="docutils literal"><span class="pre">extra_data</span></code>: Pointer to the data </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_get_extra_data">
<span class="target" id="apigroup__thread_1gac4cf33db9d32f0be609f7fe3f545b8c1"></span>void* <code class="descname">optimsoc_thread_get_extra_data</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;thread</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_get_extra_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get extra data pointer</p>
<p>Retrieve the pointer to the extra data assigned to a thread.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Associated data pointer </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">thread</span></code>: Thread to get data pointer from </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_set_pagedir">
<span class="target" id="apigroup__thread_1ga87add1eda305e6114dc89052cb03e8c3"></span>void <code class="descname">optimsoc_thread_set_pagedir</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;thread</em>, <a class="reference internal" href="group__paging.html#c.optimsoc_page_dir_t" title="optimsoc_page_dir_t">optimsoc_page_dir_t</a><em>&nbsp;dir</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_set_pagedir" title="Permalink to this definition">¶</a></dt>
<dd><p>Set page directory for thread</p>
<p>Assign a page directory to a thread.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">thread</span></code>: Thread to assign page directory to </li>
<li><code class="docutils literal"><span class="pre">dir</span></code>: Page directory to assign </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.optimsoc_thread_get_pagedir">
<span class="target" id="apigroup__thread_1ga8d34f3811993a78424f3872ec370d389"></span><a class="reference internal" href="group__paging.html#c.optimsoc_page_dir_t" title="optimsoc_page_dir_t">optimsoc_page_dir_t</a> <code class="descname">optimsoc_thread_get_pagedir</code><span class="sig-paren">(</span><a class="reference internal" href="#c.optimsoc_thread_t" title="optimsoc_thread_t">optimsoc_thread_t</a><em>&nbsp;thread</em><span class="sig-paren">)</span><a class="headerlink" href="#c.optimsoc_thread_get_pagedir" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve page directory of thread</p>
<p>Get the page directory associated with a thread</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Page directory </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal"><span class="pre">thread</span></code>: Thread to get page directory of </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</div>


</div>